{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "performance_metrics.schema.0.0.1.json",
    "title": "Quantum Benchmarking Performance Metrics File Schema",
    "description": "Describes required fields for a valid performance metrics file.",
    "required": [
        "performance_metrics_uuid",
        "solver_short_name",
        "solver_uuid",
        "creation_timestamp",
        "itemized_metrics",
        "aggregate_metrics",
        "ml_metrics",
        "$schema"
    ],
    "properties": {
        "$schema": {
            "title": "Schema URI",
            "desription": "A hyperlink to the schema that describes this JSON object.",
            "type": "string"
        },
        "performance_metrics_uuid": {
            "title": "Performance Metrics UUID",
            "description": "The UUID of the performance metrics file as a string in 8-4-4-4-12 format.",
            "type": "string",
            "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
        },
        "creation_timestamp": {
            "title": "Creation Timestamp",
            "description": "Timestamp in ISO 8601 format in UTC (note the `Z`).\n\nExamples:  \n`2022-12-25T18:00:02.223Z`,\n`2022-12-25T07:18:45Z`",
            "type": "string",
            "pattern": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(?:\\.\\d+)?Z$"
        },
        "solver_short_name": {
            "title": "Short name of the solver.",
            "description": "A short string for human readability that is not necessarily unique.  E.g., `DMRG_32core_64GB`",
            "type": "string"
        },
        "solver_uuid": {
            "title": "The UUID of the solver.",
            "description": "The UUID of the solver as a string in 8-4-4-4-12 format.",
            "type": "string",
            "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
        },
        "metrics_for_each_problem_instance": {
            "title": "Metrics broken down by problem instance",
            "description": "An list of objects (one for each `problem_instance`) holding the various performance metrics calculated.",
            "type": "array",
            "items": {
                "type": "object",
                "required": [
                    "problem_instance_uuid",
                    "solution_uuid",
                    "problem_instance_level_aggregated_performance_metrics",
                    "by_hamiltonian_performance_metrics",
                    "solution_submitted_by_due_date"
                ],
                "properties": {
                    "problem_instance_uuid": {
                        "title": "Problem instance UUID",
                        "description": "The UUID of the starting `problem_instance`.  A string in 8-4-4-4-12 format.",
                        "type": "string",
                        "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
                    },
                    "solution_uuid": {
                        "title": "Solution file UUID",
                        "description": "The UUID of the solution JSON submitted by a performer/solver to solve the associated `problem_instance`.  A string in 8-4-4-4-12 format.",
                        "type": "string",
                        "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
                    },
                    "problem_instance_level_aggregated_performance_metrics": {
                        "title": "Metrics aggregated to the `problem_instance` level",
                        "description": "One `problem_instance` may contain several Hamiltonians to solve for GSE for.  These performance metrics or summary statistics for the set of Hamiltonians in the `problem_instance`.",
                        "type": "object",
                        "required": [
                            "hamiltonians_attempted",
                            "hamiltonians_solved_within_runtime_limit",
                            "hamiltonians_solved_within_accuracy_requirement",
                            "hamiltonians_solved_within_runtime_limit_and_accuracy_requirement",
                            "number_of_hamiltonians_in_problem_instance",
                            "aggregated_run_time"
                        ],
                        "properties": {
                            "hamiltonians_attempted": {
                                "type": "integer",
                                "description": "TODO"
                            },
                            "hamiltonians_solved_within_runtime_limit": {
                                "type": "integer",
                                "description": "TODO"
                            },
                            "hamiltonians_solved_within_accuracy_requirement": {
                                "type": "integer",
                                "description": "TODO"
                            },
                            "hamiltonians_solved_within_runtime_limit_and_accuracy_requirement": {
                                "type": "integer",
                                "description": "TODO"
                            },
                            "number_of_hamiltonians_in_problem_instance": {
                                "type": "integer",
                                "description": "TODO"
                            },
                            "aggregated_run_time_seconds": {
                                "type": "number",
                                "description": "TODO: possibly consider removing this field from the solution.schema so that it is calculated and presented here."
                            }
                        }
                    },
                    "solution_submitted_by_due_date": {
                        "title": "Solution Within Due Date?",
                        "description": "Each `problem_instance` file has a specified calendar due date.  This boolean to identifies if the solution was submitted by the due date.  If there was no due date specified, then this is `true`.",
                        "type": "boolean"
                    },
                    "by_hamiltonian_performance_metrics": {
                        "title": "TODO",
                        "description": "A list of objects, one for each Hamiltonian (FCIDUMP file) in the `problem_instance`",
                        "type": "array",
                        "items": {
                            "type": "object",
                            "required": [
                                "instance_data_object_uuid",
                                "attempted",
                                "solved_within_run_time",
                                "solved_within_accuracy_requirement"
                            ],
                            "properties": {
                                "instance_data_object_uuid": {
                                    "title": "Instance Data Object UUID",
                                    "description": "UUID for the data object (typically a Hamiltonian in FCIDUMP format) in 8-4-4-4-12 format.",
                                    "type": "string",
                                    "format": "uuid",
                                    "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
                                },
                                "attempted": {
                                    "title": "TODO",
                                    "description": "a boolean indicating if the solver attempted to calculate the GSE for the Hamiltonian.  At this time, if the data is missing from `solution.json` files, it is considered NOT attempted and other metrics indicate failure.",
                                    "type": "boolean"
                                },
                                "solved_within_run_time": {
                                    "title": "TODO",
                                    "description": "a boolean indicating if the solver run time was within the run time requirement specified in the problem_instance.",
                                    "type": "boolean"
                                },
                                "solved_within_accuracy_requirement": {
                                    "title": "TODO",
                                    "description": "a boolean indicating if the solver run time was within the accuracy requirement specified in the problem_instance.",
                                    "type": "boolean"
                                }
                            }
                        }
                    }
                }
            }
        },
        "aggregate_metrics": {
            "title": "Aggregated performance metrics for the solver",
            "description": "The summary performance metrics for the solver over all `problem_instance`/Hamiltonian files.",
            "type": "object"
        },
        "ml_metrics": {
            "title": "ML performance metrics",
            "description": "TODO",
            "type": "object",
            "required": [
                "solvability_ratio",
                "f1_score"
            ],
            "properties": {
                "ml_metrics_calculator_version": {
                    "title": "ML performance metrics calculator version",
                    "description": "The version of the ML metrics calculator software.",
                    "type": "string"
                },
                "solvability_ratio": {
                    "title": "ML Solvability Ratio",
                    "description": "TODO.  A number between 0-1.  A higher number is better.",
                    "type": "number"
                },
                "f1_score": {
                    "title": "F1 score",
                    "description": "TODO.  This is a measure of the goodness of the ML model, not the solver being evaluated.",
                    "type": "number"
                }
            }
        }
    }
}